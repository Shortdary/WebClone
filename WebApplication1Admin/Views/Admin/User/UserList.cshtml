@model AdminUserListModel
@{
}

<style>
    .someFunction {
        width: 100px;
    }
</style>

<table class="table table-hover">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">닉네임</th>
            <th scope="col" class="someFunction">뭔가기능1</th>
            <th scope="col" class="someFunction">뭔가기능2</th>
        </tr>
    </thead>
    <tbody class="table table-striped" id="user-list-table-container"></tbody>
</table>
<form asp-action="GetUserListTable" asp-controller="Admin" method="get" id="user-list-table-form">
    @Html.Hidden("PageNumber")
    @Html.Hidden("PageSize")
    @Html.Hidden("SearchTarget")
    @Html.Hidden("SearchKeyword")
</form>

<div id="pagination-container"></div>
<form asp-action="GetPagination" asp-controller="Utility" method="get" id="pagination-form">
    @Html.Hidden("PageNumber")
    @Html.Hidden("PageSize")
    @Html.Hidden("ToTalRowNum", Model.Pagination.TotalRowNum)
    @Html.Hidden("FormId", Model.Pagination.FormId)
</form>

<div id="search-container"></div>
<form asp-action="GetSearch" asp-controller="Utility" method="get" id="search-form" enctype="application/x-www-form-urlencoded">
    @Html.Hidden("SearchTarget")
    @Html.Hidden("SearchKeyword")
    @Html.Hidden("SelectListItemList", Model.Search.SelectListItemList)
    @Html.Hidden("FormId", Model.Search.FormId)
</form>
@* <article id="list">
    <div class="searchAndWrite">
        <div>
            @using (Html.BeginForm("UserList", "Admin", FormMethod.Get))
            {
                <div class="search">
                    @Html.DropDownList("search_target",
                             new List<SelectListItem>()
                {
                new SelectListItem("사용자ID", "id")
                ,new SelectListItem("닉네임", "nickname")
                })
                    @Html.TextBox("search_keyword", Model.Search.SearchKeyword, new { @maxlength = "50" })
                    <button type="submit">검색</button>
                </div>
            }
        </div>
    </div>
</article> *@

<script>
    function onClickRow(userId) {
        window.location.href = '/Admin/UserList/' + userId + '/Posts';
    }

    const btns = document.getElementsByClassName("stop");
    for (const btn of btns) {
        btn.addEventListener("click", (e) => {
            e.stopPropagation();
            console.log("not working");
        })
    }


    $(document).ready(function () {
        $("#user-list-table-form").submit(function (e) {
            e.preventDefault();
            var formData = $(this).serialize();

            $.ajax({
                url: $(this).attr('action'),
                type: $(this).attr('method'),
                data: formData,
                success: function (data) {
                    $("#user-list-table-container").html(data);
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });

        $("#pagination-form").submit(function (e) {
            e.preventDefault();
            var formData = $(this).serialize();

            $.ajax({
                url: $(this).attr('action'),
                type: $(this).attr('method'),
                data: formData,
                success: function (data) {
                    $("#pagination-container").html(data);
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });

        $("#search-form").submit(function (e) {
            e.preventDefault();
            var formData = $(this).serialize();

            $.ajax({
                url: $(this).attr('action'),
                type: $(this).attr('method'),
                data: formData,
                success: function (data) {
                    $("#search-container").html(data);
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });


        $("#user-list-table-form").submit();
        $("#pagination-form").submit();
        $("#search-form").submit();
    })

</script>